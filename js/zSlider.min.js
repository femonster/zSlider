if(typeof Object.assign!="function"){Object.defineProperty(Object,"assign",{value:function t(i,s){"use strict";if(i==null){throw new TypeError("Cannot convert undefined or null to object")}var e=Object(i);for(var o=1;o<arguments.length;o++){var n=arguments[o];if(n!=null){for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}}return e},writable:true,configurable:true})}function setTransform(t,i,s){s=s||"Transform";try{["moz","o","ms","webkit",""].forEach(function(e){t.style[e+s]=i})}catch(t){console.log(t)}return t}function Zslider(t){this.defultOpts={wrap:".z-wrap",loop:false,auto:false,autoTime:3e3};this.options=Object.assign({},this.defultOpts,t);this.currPos=0;this.busy=false;this.timer=null;this.index=0;this.points=0;this.scroll_time=300;this.checkOptions().checkloop().setSliderWidth().auto_scroll()}Zslider.prototype.transform=function(t){setTransform(this.moveBox,"translate3d("+t+"px, 0, 0)","transform");this.currPos=t};Zslider.prototype.addTransition=function(t){t=t==0?0:t||this.scroll_time;this.moveBox.style.transition="transform "+t+"ms ease";this.moveBox.style.webkitTransition="-webkit-transform "+t+"ms ease"};Zslider.prototype.removeTransition=function(){this.moveBox.style.transition="transform 0s";this.moveBox.style.webkitTransition="transform 0s"};Zslider.prototype.checkOptions=function(){if(!document.querySelector(this.options.wrap)||!document.querySelector(this.options.wrap).children[0]){throw new Error("element is required")}this.oWrap=document.querySelector(this.options.wrap);this.moveBox=this.oWrap.children[0];this.oWrap.style.opacity=0;return this};Zslider.prototype.checkloop=function(){this.oneMoveWidth=this.oWrap.offsetWidth;this.points=this.moveBox.children.length;this.minLeft=-this.oWrap.offsetWidth*(this.points-1);this.maxLeft=0;if(this.options.loop){this.currPos=-this.oneMoveWidth;this.minLeft=-this.oneMoveWidth*this.points;this.maxLeft=-this.oneMoveWidth;this.transform(this.currPos,0);var t=this.moveBox;var i=t.cloneNode(true);var s=i.children;t.insertBefore(i.children[s.length-1].cloneNode(true),t.children[0]);t.appendChild(i.children[0].cloneNode(true))}return this};Zslider.prototype.setSliderWidth=function(){var t=Array.prototype.slice.call(this.moveBox.children),i=this.oneMoveWidth,s=0;t.forEach(function(t,e){t.style.width=i+"px";s+=i});this.moveBox.style.width=s+"px";this.oWrap.style.opacity=1;this.bindEvent();return this};Zslider.prototype.bindEvent=function(){this.point_x=null;this.point_y=null;this.direct="";this.moveLen=0;this.startT=0;var t=0;this.moveBox.addEventListener("touchstart",function(i){t=this.currPos;if(i.touches.length==1&&!this.busy){var s=i.touches[0];this.point_x=s.pageX;this.point_y=s.pageY;this.removeTransition();clearTimeout(this.timer);this.startT=+new Date}}.bind(this),false);document.addEventListener("touchmove",function(i){i.preventDefault();if(i.touches.length==1&&!this.busy){var s=i.touches[0];var e=s.pageX-(this.point_x===null?s.pageX:this.point_x);var o=s.pageY-(this.point_y===null?s.pageY:this.point_y);console.log(e,o);if(Math.abs(e)>Math.abs(o)){this.moveLen=e;var n=t+e;this.transform(n);this.direct=e>0?"r":"l"}else{return}}}.bind(this),false);document.addEventListener("touchend",function(t){console.log(this.direct);!this.busy&&this.moveEnd()}.bind(this),false)};Zslider.prototype.moveEnd=function(){var t=+new Date-this.startT;var i;if(t<300){if(this.direct=="l"){i=this.index+1}else if(this.direct=="r"){i=this.index-1}else{i=this.index}}else{if(Math.abs(this.moveLen)/this.oneMoveWidth<.4){i=this.index}else{if(this.direct=="l"){i=this.index+1}else if(this.direct=="r"){i=this.index-1}else{i=this.index}}}this.addTransition();this.goOne(i)};Zslider.prototype.goOne=function(t,i){var s=this;if(this.busy)return;clearTimeout(this.timer);this.busy=true;this.addTransition(i);if(this.options.loop){t=t<0?-1:t;t=t>=this.points?this.points:t}else{t=t<0?0:t;t=t>=this.points?this.points-1:t}if(!this.options.loop&&this.currPos==-(this.oneMoveWidth*t)){this.complete(t)}else if(this.options.loop&&this.currPos==-this.oneMoveWidth*(t+1)){this.complete(t)}else{if(t==-1||t==this.points){this.index=t==-1?this.points-1:0;this.currPos=t==-1?0:-this.oneMoveWidth*(this.points+1)}else{this.index=t;this.currPos=-(s.oneMoveWidth*(s.index+(s.options.loop?1:0)))}this.transform(this.currPos);setTimeout(function(){s.complete(t)},s.scroll_time)}};Zslider.prototype.auto_scroll=function(){if(!this.options.loop||!this.options.auto)return;var t=this;clearTimeout(this.timer);this.timer=setTimeout(function(){t.goOne(t.index+1)},t.options.autoTime);return this};Zslider.prototype.complete=function(t){this.busy=false;this.direct="";this.removeTransition();this.options.cb&&this.options.cb(this.index);if(t==-1){this.currPos=this.minLeft}else if(t==this.points){this.currPos=this.maxLeft}this.transform(this.currPos);this.auto_scroll()};Zslider.prototype.goNext=function(t){if(!this.busy){this.goOne(this.index+1,t)}};Zslider.prototype.goPrev=function(t){if(!this.busy){this.goOne(this.index-1,t)}};